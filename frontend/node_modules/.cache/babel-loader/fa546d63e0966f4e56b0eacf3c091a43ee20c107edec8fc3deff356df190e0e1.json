{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import'./AddMovie.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddMovie=()=>{const[query,setQuery]=useState('');const[movie,setMovie]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[addSuccess,setAddSuccess]=useState(false);const API_URL=process.env.REACT_APP_API_URL||'http://localhost:5000';const searchMovie=async e=>{e.preventDefault();setLoading(true);setError(null);setMovie(null);setAddSuccess(false);try{const token=localStorage.getItem('token');const response=await axios.get(`${API_URL}/api/movies/search?query=${encodeURIComponent(query)}`,{headers:{Authorization:`Bearer ${token}`}});setMovie(response.data);}catch(error){console.error('Error searching movie:',error);setError('Failed to search movie. Please try again.');}finally{setLoading(false);}};const addMovie=async()=>{setLoading(true);setError(null);setAddSuccess(false);try{const token=localStorage.getItem('token');await axios.post(`${API_URL}/api/movies/add`,movie,{headers:{Authorization:`Bearer ${token}`}});setAddSuccess(true);}catch(error){console.error('Error adding movie:',error);setError('Failed to add movie. It might already exist in the database.');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"add-movie-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add a New Movie\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:searchMovie,className:\"search-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:query,onChange:e=>setQuery(e.target.value),placeholder:\"Enter movie title\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Search\"})]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),addSuccess&&/*#__PURE__*/_jsx(\"div\",{className:\"success\",children:\"Movie added successfully!\"}),movie&&/*#__PURE__*/_jsxs(\"div\",{className:\"movie-details\",children:[/*#__PURE__*/_jsx(\"img\",{src:movie.Poster,alt:movie.Title}),/*#__PURE__*/_jsx(\"h3\",{children:movie.Title}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Year:\"}),\" \",movie.Year]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Director:\"}),\" \",movie.Director]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Genre:\"}),\" \",movie.Genre]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Plot:\"}),\" \",movie.Plot]}),/*#__PURE__*/_jsx(\"button\",{onClick:addMovie,children:\"Add to Database\"})]})]});};export default AddMovie;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","AddMovie","query","setQuery","movie","setMovie","loading","setLoading","error","setError","addSuccess","setAddSuccess","API_URL","process","env","REACT_APP_API_URL","searchMovie","e","preventDefault","token","localStorage","getItem","response","get","encodeURIComponent","headers","Authorization","data","console","addMovie","post","className","children","onSubmit","type","value","onChange","target","placeholder","required","src","Poster","alt","Title","Year","Director","Genre","Plot","onClick"],"sources":["/Users/tony/Documents/Code/movie-matcher/frontend/src/AddMovie.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport './AddMovie.css';\n\nconst AddMovie = () => {\n  const [query, setQuery] = useState('');\n  const [movie, setMovie] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [addSuccess, setAddSuccess] = useState(false);\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n\n\n  const searchMovie = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    setMovie(null);\n    setAddSuccess(false);\n\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get(`${API_URL}/api/movies/search?query=${encodeURIComponent(query)}`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setMovie(response.data);\n    } catch (error) {\n      console.error('Error searching movie:', error);\n      setError('Failed to search movie. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const addMovie = async () => {\n    setLoading(true);\n    setError(null);\n    setAddSuccess(false);\n\n    try {\n      const token = localStorage.getItem('token');\n      await axios.post(`${API_URL}/api/movies/add`, movie, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setAddSuccess(true);\n    } catch (error) {\n      console.error('Error adding movie:', error);\n      setError('Failed to add movie. It might already exist in the database.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"add-movie-container\">\n      <h2>Add a New Movie</h2>\n      <form onSubmit={searchMovie} className=\"search-form\">\n        <input\n          type=\"text\"\n          value={query}\n          onChange={(e) => setQuery(e.target.value)}\n          placeholder=\"Enter movie title\"\n          required\n        />\n        <button type=\"submit\">Search</button>\n      </form>\n\n      {loading && <div className=\"loading\">Loading...</div>}\n      {error && <div className=\"error\">{error}</div>}\n      {addSuccess && <div className=\"success\">Movie added successfully!</div>}\n\n      {movie && (\n        <div className=\"movie-details\">\n          <img src={movie.Poster} alt={movie.Title} />\n          <h3>{movie.Title}</h3>\n          <p><strong>Year:</strong> {movie.Year}</p>\n          <p><strong>Director:</strong> {movie.Director}</p>\n          <p><strong>Genre:</strong> {movie.Genre}</p>\n          <p><strong>Plot:</strong> {movie.Plot}</p>\n          <button onClick={addMovie}>Add to Database</button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AddMovie;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}