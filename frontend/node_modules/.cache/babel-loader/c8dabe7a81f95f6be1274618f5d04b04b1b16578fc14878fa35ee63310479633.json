{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'./Matches.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Matches=()=>{const[matches,setMatches]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const apiUrl=process.env.REACT_APP_API_URL||'http://localhost:5000';useEffect(()=>{fetchMatches();},[]);const fetchMatches=async()=>{setLoading(true);setError(null);try{const token=localStorage.getItem('token');const response=await axios.get(`${apiUrl}/api/movies/matches`,{headers:{Authorization:`Bearer ${token}`}});console.log('Matches response:',response.data);// For debugging\nif(Array.isArray(response.data)){setMatches(response.data);}else{throw new Error('Received invalid data format');}}catch(error){console.error('Error fetching matches:',error);setError('Failed to fetch matches. Please try again.');}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading matches...\"});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error});}if(matches.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"no-matches\",children:\"No universal matches found yet. Keep swiping!\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"matches-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Universal Matches\"}),/*#__PURE__*/_jsx(\"div\",{className:\"matches-grid\",children:matches.map(movie=>/*#__PURE__*/_jsxs(\"div\",{className:\"match-card\",children:[/*#__PURE__*/_jsx(\"img\",{src:movie.poster,alt:movie.title}),/*#__PURE__*/_jsx(\"h3\",{children:movie.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Genre: \",movie.genre]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Rating: \",movie.rating]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Liked by all \",movie.match_count,\" users\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"matched-users\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Users who liked this movie:\"}),/*#__PURE__*/_jsx(\"ul\",{children:movie.matched_users.map(user=>/*#__PURE__*/_jsx(\"li\",{children:user.username},user.id))})]})]},movie.id))})]});};export default Matches;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Matches","matches","setMatches","loading","setLoading","error","setError","apiUrl","process","env","REACT_APP_API_URL","fetchMatches","token","localStorage","getItem","response","get","headers","Authorization","console","log","data","Array","isArray","Error","className","children","length","map","movie","src","poster","alt","title","genre","rating","match_count","matched_users","user","username","id"],"sources":["/Users/tony/Documents/Code/movie-matcher/frontend/src/Matches.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './Matches.css';\n\nconst Matches = () => {\n  const [matches, setMatches] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n\n  useEffect(() => {\n    fetchMatches();\n  }, []);\n\n  const fetchMatches = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get(`${apiUrl}/api/movies/matches`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      console.log('Matches response:', response.data); // For debugging\n      if (Array.isArray(response.data)) {\n        setMatches(response.data);\n      } else {\n        throw new Error('Received invalid data format');\n      }\n    } catch (error) {\n      console.error('Error fetching matches:', error);\n      setError('Failed to fetch matches. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return <div className=\"loading\">Loading matches...</div>;\n  }\n\n  if (error) {\n    return <div className=\"error\">{error}</div>;\n  }\n\n  if (matches.length === 0) {\n    return <div className=\"no-matches\">No universal matches found yet. Keep swiping!</div>;\n  }\n\n  return (\n    <div className=\"matches-container\">\n      <h2>Universal Matches</h2>\n      <div className=\"matches-grid\">\n        {matches.map(movie => (\n          <div key={movie.id} className=\"match-card\">\n            <img src={movie.poster} alt={movie.title} />\n            <h3>{movie.title}</h3>\n            <p>Genre: {movie.genre}</p>\n            <p>Rating: {movie.rating}</p>\n            <p>Liked by all {movie.match_count} users</p>\n            <div className=\"matched-users\">\n              <h4>Users who liked this movie:</h4>\n              <ul>\n                {movie.matched_users.map(user => (\n                  <li key={user.id}>{user.username}</li>\n                ))}\n              </ul>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Matches;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}