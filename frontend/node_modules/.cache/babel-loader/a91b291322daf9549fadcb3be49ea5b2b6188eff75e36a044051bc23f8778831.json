{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import MovieSwiper from'./MovieSwiper';import Matches from'./Matches';import AddMovie from'./AddMovie';import AllMovies from'./AllMovies';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[isLoggedIn,setIsLoggedIn]=useState(false);const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState(null);const[currentView,setCurrentView]=useState('swiper');const apiUrl=process.env.REACT_APP_API_URL||'http://localhost:5000';const handleLogin=async e=>{e.preventDefault();setError(null);try{const response=await axios.post(`${apiUrl}/api/auth/login`,{username,password});if(response.data&&response.data.access_token){localStorage.setItem('token',response.data.access_token);setIsLoggedIn(true);}else{throw new Error('Invalid response from server');}}catch(error){console.error('Login failed:',error);if(error.response){// The request was made and the server responded with a status code\n// that falls out of the range of 2xx\nsetError(`Login failed: ${error.response.data.message||error.response.statusText}`);}else if(error.request){// The request was made but no response was received\nsetError('Login failed: No response from server. Please try again.');}else{// Something happened in setting up the request that triggered an Error\nsetError(`Login failed: ${error.message}`);}}};const handleLogout=()=>{localStorage.removeItem('token');setIsLoggedIn(false);setCurrentView('swiper');};if(!isLoggedIn){return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Movie Matcher\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Username\",value:username,onChange:e=>setUsername(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"})]})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Movie Matcher\"}),/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('swiper'),children:\"Swipe Movies\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('matches'),children:\"View Matches\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('add'),children:\"Add Movie\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('all'),children:\"All Movies\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Logout\"})]}),currentView==='swiper'&&/*#__PURE__*/_jsx(MovieSwiper,{}),currentView==='matches'&&/*#__PURE__*/_jsx(Matches,{}),currentView==='add'&&/*#__PURE__*/_jsx(AddMovie,{}),currentView==='all'&&/*#__PURE__*/_jsx(AllMovies,{})]});}export default App;","map":{"version":3,"names":["React","useState","axios","MovieSwiper","Matches","AddMovie","AllMovies","jsx","_jsx","jsxs","_jsxs","App","isLoggedIn","setIsLoggedIn","username","setUsername","password","setPassword","error","setError","currentView","setCurrentView","apiUrl","process","env","REACT_APP_API_URL","handleLogin","e","preventDefault","response","post","data","access_token","localStorage","setItem","Error","console","message","statusText","request","handleLogout","removeItem","className","children","onSubmit","type","placeholder","value","onChange","target","onClick"],"sources":["/Users/tony/Documents/Code/movie-matcher/frontend/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport MovieSwiper from './MovieSwiper';\nimport Matches from './Matches';\nimport AddMovie from './AddMovie';\nimport AllMovies from './AllMovies';\nimport './App.css';\n\nfunction App() {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState(null);\n  const [currentView, setCurrentView] = useState('swiper');\n  const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    setError(null);\n    try {\n      const response = await axios.post(`${apiUrl}/api/auth/login`, { username, password });\n      if (response.data && response.data.access_token) {\n        localStorage.setItem('token', response.data.access_token);\n        setIsLoggedIn(true);\n      } else {\n        throw new Error('Invalid response from server');\n      }\n    } catch (error) {\n      console.error('Login failed:', error);\n      if (error.response) {\n        // The request was made and the server responded with a status code\n        // that falls out of the range of 2xx\n        setError(`Login failed: ${error.response.data.message || error.response.statusText}`);\n      } else if (error.request) {\n        // The request was made but no response was received\n        setError('Login failed: No response from server. Please try again.');\n      } else {\n        // Something happened in setting up the request that triggered an Error\n        setError(`Login failed: ${error.message}`);\n      }\n    }\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    setIsLoggedIn(false);\n    setCurrentView('swiper');\n  };\n\n  if (!isLoggedIn) {\n    return (\n      <div className=\"App\">\n        <h1>Movie Matcher</h1>\n        {error && <p className=\"error\">{error}</p>}\n        <form onSubmit={handleLogin}>\n          <input\n            type=\"text\"\n            placeholder=\"Username\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n          <button type=\"submit\">Login</button>\n        </form>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"App\">\n      <h1>Movie Matcher</h1>\n      <nav>\n        <button onClick={() => setCurrentView('swiper')}>Swipe Movies</button>\n        <button onClick={() => setCurrentView('matches')}>View Matches</button>\n        <button onClick={() => setCurrentView('add')}>Add Movie</button>\n        <button onClick={() => setCurrentView('all')}>All Movies</button>\n        <button onClick={handleLogout}>Logout</button>\n      </nav>\n      {currentView === 'swiper' && <MovieSwiper />}\n      {currentView === 'matches' && <Matches />}\n      {currentView === 'add' && <AddMovie />}\n      {currentView === 'all' && <AllMovies />}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}